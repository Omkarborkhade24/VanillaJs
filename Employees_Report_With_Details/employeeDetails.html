<!DOCTYPE html>
<html>
  <head>
    <title>Employee Details</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
  </head>

  <body>
    <header class="bg-dark text-light text-center py-3">
      <h1>Employee Details</h1>
    </header>
    <main>
      <section class="container mt-4">
        <hr />
        <div class="row" id="employeeDetail"></div>
      </section>
    </main>
    <footer></footer>
    <script>
      function getDetailById() {
        const employees = [
          {
            id: "1",
            name: "John Doe",
            title: "Software Developer",
            department: "IT",
          },
          {
            id: "2",
            name: "Jane Smith",
            title: "Designer",
            department: "Design",
          },
          {
            id: "3",
            name: "Bob Johnson",
            title: "Project Manager",
            department: "Management",
          },
        ];

        const url = new URL(window.location.href);
        // console.log(window.location.href);
        const employeeID = url.searchParams.get("id");
        //get the id from the URL
        // find that id in the database
        let employee;
        for (let i = 0; i < employees.length; i++) {
          if (employees[i].id === employeeID) {
            employee = employees[i];
          }
        }
        // display the details on the view
        const employeeCard = document.querySelector("#employeeDetail");

        function createCard(cardObj) {
          const col = document.createElement("div");
          col.className = "col-md-6";

          const card = document.createElement("div");
          card.className = "card mb-3";

          const cardHeader = document.createElement("div");
          cardHeader.className = "card-header";
          const h2 = document.createElement("h2");
          h2.textContent = cardObj ? cardObj.name : "Employee not Found.";

          cardHeader.appendChild(h2);

          const cardBody = document.createElement("div");
          cardBody.className = "card-body";

          const ul = document.createElement("ul");
          ul.className = "list-group list-group-flush";

          const epName = document.createElement("li");
          epName.className = "list-group-item";

          epName.innerHTML = `<strong>Name: </strong> ${
            cardObj ? cardObj.name : "N/A"
          }`;

          const emDegn = document.createElement("li");
          emDegn.className = "list-group-item";

          emDegn.innerHTML = `<strong>Designation: </strong>${
            cardObj ? cardObj.title : "N/A"
          }`;

          const emDept = document.createElement("li");
          emDept.className = "list-group-item";

          emDept.innerHTML = `<strong>Department: </strong>${
            cardObj ? cardObj.department : "N/A"
          }`;

          ul.appendChild(epName);
          ul.appendChild(emDegn);
          ul.appendChild(emDept);

          cardBody.appendChild(ul);

          card.appendChild(cardHeader);
          card.appendChild(cardBody);

          col.appendChild(card);

          employeeCard.appendChild(col);
        }
        createCard(employee);
      }
      getDetailById();
    </script>
  </body>
</html>
