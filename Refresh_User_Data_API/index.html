<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite App</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
      rel="styleSheet"
    />
  </head>

  <body>
    <div class="container mt-3">
      <h1>Random Users</h1>
      <button id="getUsersBtn" class="btn btn-primary">Get Random Users</button>
      <div id="dataContainer" class="mt-3"></div>
    </div>

    <script>
      const getUsersBtn = document.querySelector('#getUsersBtn');
      const dataContainer = document.querySelector('#dataContainer');

      const apiUrl = 'https://randomuser.me/api/?results=3';

      getUsersBtn.addEventListener('click', function () {
        dataContainer.textContent = 'Posts Loading...';
        fetch(apiUrl)
          .then(function (response) {
            return response.json();
          })
          .then(function (data) {
            if (data.results && data.results.length > 0) {
              const usersData = [];
              for (let i = 0; i < data.results.length; i++) {
                let userData = `<div class="container mt-3 py-3"> <img src="${data.results[i].picture.medium}" style="width: 100px"/> <br> <p>Name: ${data.results[i].name.first} ${data.results[i].name.last} </p> <br><p>Email: ${data.results[i].email}</p></div>`;

                usersData.push(userData);
              }
              const finalData = usersData.join('');
              dataContainer.innerHTML = finalData;
            } else {
              dataContainer.textContent = 'No Users Found.';
            }
          })
          .catch(function showError(error) {
            dataContainer.textContent =
              'An error occured while fetching users.';
          });
      });
    </script>
  </body>
</html>
